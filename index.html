<!doctype html>

<html lang="en">
<head>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js"></script>
	<script src="prova.js" type="text/javascript"></script>
	<title>Prova sensori</title>
	<meta charset="utf-8">
	<meta name="description" content="The HTML5 Herald">
	<meta name="author" content="SitePoint">

</head>

<body>
	<h1> Accelerometer </h1>
	<p>Data: </p>
	<div id='status'> No data from sensor </div>
	<script>
		let sensor = new Accelerometer({frequency: 1});
		sensor.start();
		var x=0;
		var y=0;
		var z=0;
		var lx=0;
		var ly=0;
		var lz=0;
		for (i=1; i<=15; i++){
			sensor.onreading = () => {
				x= sensor.x ;
				y= sensor.y ;
				z= sensor.z ;
				document.getElementById('status').innerHTML = "Acceleration: " + x +"	" + y + "	" + z;
			};
			lx +=x;
			ly +=y;
			lz +=z;
			
		}
		document.getElementById('status').innerHTML = "Acceleration: " + lx/15 +"	" + y/15 + "	" + z/15;
		
		
		sensor.onerror = event => {
			document.getElementById('status').innerHTML = "Error Name" + event.error.name + "Error Message " + event.error.message;
		};
	</script>
	<p>Stato connesione MQTT </p>
	
	<div id ='client_status'> No client  </div>
	<div id ='con_status'> Non connesso </div>
	<div id ='msg_status'> No msg send </div>
	
</body>
</html>
